<div class="timeline-item">
    <div class="timeline-content">
        <button class="btn-close" onclick="toggleProject(this)">✕</button>

        <div class="project-image">
            <img src="assets/images/project-parking/parking.png" alt="Smart Modular Parking System">
        </div>

        <div class="project-info">
            <h3>
                <span class="lang-text" data-lang="fr">Parking System Modular (PSM)</span>
                <span class="lang-text" data-lang="en" style="display: none;">Parking System Modular (PSM)</span>
            </h3>

            <p class="lang-text" data-lang="fr">
                Architecte système et Lead Power pour un système de parking IoT autonome. 
                Conception complète d'un <strong>BMS 100W USB-C PD</strong> et implémentation d'un <strong>SoC RISC-V</strong> sur FPGA pour le contrôle moteur.
            </p>
            <p class="lang-text" data-lang="en" style="display: none;">
                System Architect & Power Lead for an autonomous IoT parking system. 
                Full design of a <strong>100W USB-C PD BMS</strong> and implementation of a <strong>RISC-V SoC</strong> on FPGA for motor control.
            </p>

            <div class="project-tags">
                <span class="tag">KiCad 7</span>
                <span class="tag">FPGA LiteX</span>
                <span class="tag">RISC-V</span>
                <span class="tag">MQTT</span>
                <span class="tag">Power Delivery</span>
            </div>

            <div class="card-buttons">
                <button class="btn-expand" onclick="toggleProject(this)">
                    <span class="lang-text" data-lang="fr">En savoir plus →</span>
                    <span class="lang-text" data-lang="en" style="display: none;">Learn more →</span>
                </button>

                <a href="https://github.com/vincent-cauquil/5A-Projet-Parking" class="btn-github" target="_blank">
                    <svg class="icon"><use href="#icon-github"/></svg> GitHub
                </a>

                <a href="https://drive.google.com/file/d/1G9lH1KeA8uOhU5wkQOQOmOX-aidNT0l7/view" class="btn-video" target="_blank">
                    <span class="lang-text" data-lang="fr">Démo Vidéo</span>
                    <span class="lang-text" data-lang="en" style="display: none;">Video Demo</span>
                </a>
            </div>

            <div class="project-details">

                <!-- ===== BLOC 1 : Architecture de Puissance & BMS ===== -->
                <div class="detail-block">
                    <h4>
                        <span class="lang-text" data-lang="fr">
                            Architecture de Puissance & BMS
                            <span class="role-badge tech">Conception Lead</span>
                        </span>
                        <span class="lang-text" data-lang="en" style="display: none;">
                            Power Architecture & BMS
                            <span class="role-badge tech">Lead Design</span>
                        </span>
                    </h4>

                    <div class="evidence-container">
                        <div class="evidence-text">
                            <div class="lang-text" data-lang="fr">
                                <p><strong>Contexte & Défi :</strong> Alimenter une architecture hétérogène (FPGA, STM32, BeagleY-AI, Moteurs 20V) consommant de <strong>15W (repos) à 65W (pleine charge)</strong>, avec un objectif d'autonomie <strong>> 2h</strong>.</p>
                                
                                <p><strong>Conception Hardware :</strong> Réalisation sous <strong>KiCad 7</strong> d'un BMS 4S3P (Cellules <strong>Samsung INR18650-35E</strong>). Architecture <strong>NVDC</strong> (Narrow Voltage DC) implémentée avec le trio Texas Instruments :</p>
                                <ul>
                                    <li>Chargeur Buck-Boost <strong>BQ25713</strong> (gestion USB-C PD 100W)</li>
                                    <li>Jauge & Équilibrage 4SXP <strong>BQ40Z50</strong> (algorithme Impedance Track™)</li>
                                    <li>Secondaire Protection de Sur-Tension <strong>BQ296102</strong></li>
                                    <li>Protection tertiaire par fusibles (3A) et logique d'activation des sorties</li>
                                </ul>
                                
                                <p>
                                    <strong>Intelligence Embarquée :</strong> Intégration d'un <strong>RP2350</strong> pour la supervision du BMS. 
                                    Sélectionné pour son ratio performance/coût (Cœurs, Fréquence, I/O) supérieur aux standards STM32 
                                    (IPN ~<strong>8500 RP2350</strong> vs <strong>~444 STM32</strong>).
                                </p>
                            </div>

                            <div class="lang-text" data-lang="en" style="display: none;">
                                <p><strong>Context & Challenge:</strong> Powering a heterogeneous architecture (FPGA, STM32, BeagleY-AI, 20V Motors) requiring <strong>from 15W (idle) to 65W (heavy load)</strong>, with a target autonomy of <strong>> 2h</strong>.</p>
                                
                                <p><strong>Hardware Design:</strong> Designed a 4S3P BMS (<strong>Samsung INR18650-35E</strong> cells) using <strong>KiCad 7</strong>. Implemented an <strong>NVDC</strong> (Narrow Voltage DC) architecture with the Texas Instruments trio:</p>
                                <ul>
                                    <li>Buck-Boost Charger <strong>BQ25713</strong> (100W USB-C PD management)</li>
                                    <li>Fuel Gauge & Balancing 4SXP <strong>BQ40Z50</strong> (Impedance Track™ algorithm)</li>
                                    <li>Secondary Overvoltage Protection <strong>BQ296102</strong></li>
                                    <li>Tertiary protection via fuses (3A) and output activation logic</li>
                                </ul>
                                
                                <p>
                                    <strong>Embedded Intelligence:</strong> Integration of an <strong>RP2350</strong> for BMS monitoring and control. 
                                    Selected for its superior performance-to-price ratio (Cores, Clock, I/O) compared to STM32 standards 
                                    (IPN ~<strong>8500 RP2350</strong> vs <strong>~444 STM32</strong>).
                                </p></div>
                        </div>

                        <div class="evidence-slider" id="bms-slider">
                            <div class="slide active">
                                <img src="assets/images/project-parking/BMS_schem.png" 
                                     alt="BMS Conceptual Architecture">
                                <span class="caption lang-text" data-lang="fr">1/2 : Architecture Conceptuelle (Trio TI + RP2350)</span>
                                <span class="caption lang-text" data-lang="en" style="display: none;">1/2 : Conceptual Architecture (TI Trio + RP2350)</span>
                            </div>
                            <div class="slide">
                                <img src="assets/images/project-parking/BMS_3D_view.png" 
                                     alt="KiCad 3D PCB View">
                                <span class="caption lang-text" data-lang="fr">2/2 : Modélisation 3D & Placement (KiCad 7)</span>
                                <span class="caption lang-text" data-lang="en" style="display: none;">2/2 : 3D Modeling & Placement (KiCad 7)</span>
                            </div>
                            <a class="prev" onclick="plusSlides(-1, 'bms-slider')">❮</a>
                            <a class="next" onclick="plusSlides(1, 'bms-slider')">❯</a>
                        </div>                        
                    </div>
                </div>

                <!-- ===== BLOC 2 : FPGA & SoC RISC-V ===== -->
                <div class="detail-block">
                    <h4>
                        <span class="lang-text" data-lang="fr">
                            FPGA & SoC RISC-V (LiteX)
                            <span class="role-badge alert">Déploiement Express (J-7)</span>
                        </span>
                        <span class="lang-text" data-lang="en" style="display: none;">
                            FPGA & RISC-V SoC (LiteX)
                            <span class="role-badge alert">Fast-Track Deployment (D-7)</span>
                        </span>
                    </h4>

                    <div class="evidence-container">
                        <div class="evidence-text">
                            <div class="lang-text" data-lang="fr">
                                <p><strong>Objectif :</strong> Piloter des barrières motorisées (Moteurs Pas-à-pas <strong>Adafruit + ULN2003</strong>) avec une précision temps réel tout en conservant la flexibilité d'un OS haut niveau.</p>
                
                                <p style="border-left: 3px solid #ff6b6b; padding-left: 12px; background: rgba(255, 107, 107, 0.05); border-radius: 0 4px 4px 0; font-size: 0.9em;">
                                    <strong>Challenge (J-7) :</strong> Pivot stratégique suite à une impasse technique. Conception intégrale du SoC, du driver C (DMA) et de l'interface MQTT en une semaine pour garantir la livraison.
                                </p>
                
                                <p><strong>Implémentation SoC :</strong> Déploiement d'un Softcore <strong>VexRiscv</strong> (32-bit RISC-V) sur FPGA <strong>Nexys A7-100T</strong> via la toolchain <strong>LiteX</strong>. Intégration d'un bus <strong>AXI</strong> pour la communication entre le CPU et les périphériques custom.</p>
                
                                <p><strong>Linux & Drivers :</strong> Compilation d'un noyau <strong>Linux embarqué</strong> via <strong>Buildroot</strong>. Développement d'un driver spécifique utilisant le mapping mémoire (<code>mmap</code>) pour contrôler directement les registres matériels des moteurs depuis l'espace utilisateur Linux, contournant les latences classiques.</p>
                            </div>
                
                            <div class="lang-text" data-lang="en" style="display: none;">
                                <p><strong>Objective:</strong> Controlling motorized barriers (<strong>Adafruit + ULN2003</strong> Stepper Motors) with real-time precision while maintaining high-level OS flexibility.</p>
                
                                <p style="border-left: 3px solid #ff6b6b; padding-left: 12px; background: rgba(255, 107, 107, 0.05); border-radius: 0 4px 4px 0; font-size: 0.9em;">
                                    <strong>Challenge (D-7):</strong> Strategic pivot following a technical deadlock. Full design of the SoC, C driver (DMA), and MQTT interface completed in one week to ensure delivery.
                                </p>
                
                                <p><strong>SoC Implementation:</strong> Deployment of a <strong>VexRiscv</strong> Softcore (32-bit RISC-V) on <strong>Nexys A7-100T</strong> FPGA using the <strong>LiteX</strong> toolchain. Integration of an <strong>AXI bus</strong> for communication between the CPU and custom peripherals.</p>
                
                                <p><strong>Linux & Drivers:</strong> Compilation of an <strong>embedded Linux</strong> kernel via <strong>Buildroot</strong>. Development of a specific driver using memory mapping (<code>mmap</code>) to directly control motor hardware registers from Linux user space, bypassing standard latencies.</p>
                            </div>
                        </div>
                        <div class="evidence-image">
                            <img src="assets/images/project-parking/fpga_soc_arch.png" 
                                 alt="RISC-V SoC Architecture">
                            <span class="caption lang-text" data-lang="fr">Architecture du SoC Custom VexRiscv sur FPGA</span>
                            <span class="caption lang-text" data-lang="en" style="display: none;">Custom VexRiscv SoC Architecture on FPGA</span>
                        </div>                        
                    </div>
                </div>

                <!-- ===== BLOC 3 : Architecture Système & Coordination ===== -->
                <div class="detail-block">
                    <h4>
                        <span class="lang-text" data-lang="fr">
                            Architecture Système & Coordination
                            <span class="role-badge lead">Chef de Projet Technique (4 pers.) </span>
                        </span>
                        <span class="lang-text" data-lang="en" style="display: none;">
                            System Architecture & Coordination
                            <span class="role-badge lead">Technical Team Lead (4 eng.) </span>
                        </span>
                    </h4>

                    <div class="evidence-container">
                        <div class="evidence-text">
                            <div class="lang-text" data-lang="fr">
                                <p><strong>Rôle :</strong> Lead Technique et Coordinateur d'une équipe de <strong>4 ingénieurs</strong>.</p>
                                
                                <p><strong>Architecture Distribuée :</strong> Esquisse du réseau IoT local sur protocole <strong>MQTT</strong>. Orchestration des flux de données entre :</p>
                                <ul>
                                    <li>Le "Cerveau" (<strong>BeagleY-AI</strong> / Broker MQTT)</li>
                                    <li>L'Interface RFID Utilisateur (<strong>STM32F7 #1</strong>)</li>
                                    <li>Le gestionnaire de l'ascenseur (<strong>STM32F7 #2</strong>)</li>
                                    <li>L'Actionneur de Puissance (<strong>FPGA</strong>)</li>
                                </ul>
                                
                                <p><strong>Contribution Transverse :</strong> Support au développement de la <strong>Base de Données SQL</strong> pour garantir l'intégrité des règles d'accès (Anti-passback, Logs) et supervision de l'intégration globale des modules mécaniques, électroniques et logiciels.</p>
                            </div>

                            <div class="lang-text" data-lang="en" style="display: none;">
                                <p><strong>Role:</strong> Technical Lead and Coordinator for a team of <strong>4 engineers</strong>.</p>
                                
                                <p><strong>Distributed Architecture:</strong> Drafted a local IoT network based on <strong>MQTT</strong> protocol. Orchestrated data flows between:</p>
                                <ul>
                                    <li>The "Brain" (<strong>BeagleY-AI</strong> / MQTT Broker)</li>
                                    <li>The RFID User Interface (<strong>STM32F7 #1</strong>)</li>
                                    <li>The Elevator Managor (<strong>STM32F7 #2</strong>)</li>
                                    <li>The Power Actuator (<strong>FPGA</strong>)</li>
                                </ul>
                                
                                <p><strong>Cross-functional Contribution:</strong> Supported <strong>SQL Database</strong> development to ensure access rule integrity (Anti-passback, Logs) and supervised the global integration of mechanical, electrical, and software modules.</p>
                            </div>
                        </div>
                        <div class="evidence-image">
                            <img src="assets/images/project-parking/global_arch.png" 
                                 alt="MQTT System Architecture">
                            <span class="caption lang-text" data-lang="fr">Synoptique Global des interactions système (MQTT)</span>
                            <span class="caption lang-text" data-lang="en" style="display: none;">Global System Interactions Overview (MQTT)</span>
                        </div>
                        
                    </div>
                </div>

                <!-- ===== BLOC 4 : Compétences Mobilisées ===== -->
                <div class="detail-block">
                    <h4 class="lang-text" data-lang="fr"> Compétences Mobilisées</h4>
                    <h4 class="lang-text" data-lang="en" style="display: none;"> Skills Leveraged</h4>

                    <div class="skills-grid">
                        <div class="skill-category">
                            <h5 class="lang-text" data-lang="fr">Power Electronics</h5>
                            <h5 class="lang-text" data-lang="en" style="display: none;">Power Electronics</h5>
                            <ul>
                                <li>USB-C Power Delivery (100W)</li>
                                <li>BMS Design (4S3P Li-Ion)</li>
                                <li>NVDC Architecture (TI)</li>
                                <li>KiCad 7 (Schematic & PCB)</li>
                            </ul>
                        </div>
                
                        <div class="skill-category">
                            <h5 class="lang-text" data-lang="fr">FPGA & SoC</h5>
                            <h5 class="lang-text" data-lang="en" style="display: none;">FPGA & SoC</h5>
                            <ul>
                                <li>RISC-V (VexRiscv Softcore)</li>
                                <li>LiteX Framework</li>
                                <li>AXI Bus Integration</li>
                                <li>Embedded Linux (Buildroot)</li>
                            </ul>
                        </div>
                
                        <div class="skill-category">
                            <h5 class="lang-text" data-lang="fr">Programmation</h5>
                            <h5 class="lang-text" data-lang="en" style="display: none;">Programming</h5>
                            <ul>
                                <li>C/C++ (Drivers, Firmware)</li>
                                <li>Python (Automation, Scripts)</li>
                                <li>Bash (System Scripts)</li>
                                <li>
                                    <span class="lang-text" data-lang="fr">HTML/CSS/JS (UI, polissage)</span>
                                    <span class="lang-text" data-lang="en" style="display: none;">HTML/CSS/JS (UI Refactoring)</span>
                                </li>
                            </ul>
                        </div>
                
                        <div class="skill-category">
                            <h5 class="lang-text" data-lang="fr">IoT & Intégration Système</h5>
                            <h5 class="lang-text" data-lang="en" style="display: none;">IoT & System Integration</h5>
                            <ul>
                                <li>MQTT Protocol</li>
                                <li>BeagleY-AI (AI Edge)</li>
                                <li>SQL Database (Access Rules)</li>
                                <li>
                                    <span class="lang-text" data-lang="fr">Coordination d'équipe (4 ing.)</span>
                                    <span class="lang-text" data-lang="en" style="display: none;">Team Coordination (4 eng.)</span>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="timeline-date">
        <span class="date">
            <span class="lang-text" data-lang="fr">Jan 2026 - Oct 2025</span>
            <span class="lang-text" data-lang="en" style="display: none;">Jan 2026 - Oct 2025</span>
        </span>
        <div class="timeline-dot"></div>
    </div>
</div>
